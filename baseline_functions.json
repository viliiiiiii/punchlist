{
    "generated_at": "2025-10-21T13:37:58+00:00",
    "files": {
        "config.php": [],
        "helpers.php": {
            "get_pdo": "get_pdo(string $which = 'apps')",
            "csrf_token": "csrf_token()",
            "verify_csrf_token": "verify_csrf_token(?string $token)",
            "redirect_with_message": "redirect_with_message(string $location, string $message, string $type='success')",
            "flash_message": "flash_message()",
            "current_user": "current_user()",
            "require_login": "require_login()",
            "is_post": "is_post()",
            "sanitize": "sanitize(string $v)",
            "get_priorities": "get_priorities()",
            "get_statuses": "get_statuses()",
            "priority_label": "priority_label(string $p)",
            "priority_class": "priority_class(string $p)",
            "status_label": "status_label(string $s)",
            "status_class": "status_class(string $s)",
            "fetch_buildings": "fetch_buildings()",
            "fetch_rooms_by_building": "fetch_rooms_by_building(?int $buildingId)",
            "fetch_task_photos": "fetch_task_photos(int $taskId)",
            "s3_client": "s3_client()",
            "s3_signed_url_for_key": "s3_signed_url_for_key(string $key, int $ttlSeconds = 900)",
            "photo_public_url": "photo_public_url(array|string $photoOrKey, ?int $maxWidth = null)",
            "s3_object_url": "s3_object_url(string $key)",
            "build_task_filter_query": "build_task_filter_query(array $filters, array &$params)",
            "fetch_tasks": "fetch_tasks(array $filters, string $sort, string $direction, int $limit, int $offset, int &$total)",
            "fetch_task": "fetch_task(int $taskId)",
            "insert_task": "insert_task(array $data)",
            "update_task": "update_task(int $taskId, array $data)",
            "delete_task": "delete_task(int $taskId)",
            "upsert_photo": "upsert_photo(int $taskId, int $position, string $key, string $url)",
            "remove_photo": "remove_photo(int $photoId)",
            "get_filter_values": "get_filter_values()",
            "filter_summary": "filter_summary(array $f)",
            "fetch_building_name": "fetch_building_name(int $buildingId)",
            "fetch_room_label": "fetch_room_label(int $roomId)",
            "validate_task_payload": "validate_task_payload(array $data, array &$errors)",
            "ensure_building_room_valid": "ensure_building_room_valid(int $buildingId, int $roomId)",
            "get_age_bucket_sql": "get_age_bucket_sql()",
            "analytics_counts": "analytics_counts()",
            "analytics_group": "analytics_group(string $sql)",
            "export_tasks": "export_tasks(array $filters)",
            "fetch_tasks_by_ids": "fetch_tasks_by_ids(array $ids)",
            "room_tasks": "room_tasks(int $roomId)",
            "group_tasks_by_status": "group_tasks_by_status(array $tasks)",
            "task_photo_thumbnails": "task_photo_thumbnails(int $taskId)",
            "fetch_photos_for_tasks": "fetch_photos_for_tasks(array $ids)",
            "json_response": "json_response(array $data, int $status=200)",
            "core_user_record": "core_user_record(int $userId)",
            "current_user_role_key": "current_user_role_key()",
            "current_user_sector_id": "current_user_sector_id()",
            "can": "can(string $perm)",
            "require_perm": "require_perm(string $perm)",
            "enforce_not_suspended": "enforce_not_suspended()",
            "log_event": "log_event(string $action, ?string $type = null, ?int $id = null, array $meta = [])"
        },
        "auth.php": {
            "attempt_login": "attempt_login(string $email, string $password)",
            "logout": "logout()",
            "require_post_csrf": "require_post_csrf()"
        },
        "tasks.php": [],
        "task_new.php": [],
        "task_edit.php": [],
        "rooms.php": [],
        "upload.php": {
            "fail": "fail(int $code, string $msg)"
        }
    }
}
