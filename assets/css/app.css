/* ==================================================================
   Punchlist â€” Modern UI (Light theme only)
   - Mobile-first, responsive, accessible
   - Clean top bar, horizontal nav (no list bullets)
   - Compact forms & tables; card-ified tables on phones
   - Photo modal, thumbnails, badges, flash messages
   - Works with existing class names from the app
   ================================================================== */

/* -----------------------------
   0) Design tokens (light-only)
   ----------------------------- */
:root{
  /* Palette */
  --bg: #f6f8fb;
  --bg-soft:#f9fbff;
  --card:#ffffff;
  --text:#141b23;
  --muted:#6b7280;
  --border:#e6e9ef;

  --primary:#2563eb;
  --primary-600:#1f4fdc;
  --primary-700:#173fbf;

  --danger:#ef4444;
  --success:#10b981;
  --warning:#f59e0b;
  --info:#06b6d4;

  /* Shadows & radii */
  --shadow-1:0 1px 2px rgba(18, 24, 32, .06);
  --shadow-2:0 6px 18px rgba(11, 20, 44, .08);
  --shadow-3:0 20px 40px rgba(11, 20, 44, .12);
  --radius:14px;

  /* Spacing */
  --s1:.25rem; --s2:.5rem; --s3:.75rem; --s4:1rem; --s5:1.25rem; --s6:1.5rem; --s7:2rem;

  /* Motion */
  --t-fast:160ms cubic-bezier(.2,.8,.2,1);
  --t-base:220ms cubic-bezier(.2,.8,.2,1);

  color-scheme: light;
}

/* ---------------------------------
   1) Resets / base accessibility
   --------------------------------- */
*{ box-sizing:border-box; min-width:0; }
html{ -webkit-text-size-adjust:100%; }
html, body{
  height:100%;
  margin:0; padding:0;
  background:var(--bg);
  color:var(--text);
  font: 16px/1.45 Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  overflow-x:hidden;
}
a{ color:var(--primary); text-decoration:none; transition: color var(--t-fast); }
a:hover{ color:var(--primary-700); text-decoration: underline; }
:focus-visible{ outline: 3px solid rgba(37,99,235,.22); outline-offset: 2px; border-radius: 8px; }
@media (prefers-reduced-motion:reduce){
  *{ animation: none !important; transition: none !important; }
}

/* Helper utilities */
.muted{ color:var(--muted); }
.text-muted{ color:var(--muted); }
.center{ text-align:center; }
.lead{ color:#1d2630; font-weight:600; }
.hidden{ display:none !important; }
.truncate-1{ display:-webkit-box; -webkit-line-clamp:1; -webkit-box-orient:vertical; overflow:hidden; }
.truncate-2{ display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; }

/* ---------------------------------
   2) Layout container
   --------------------------------- */
.container{
  width:100%;
  padding:0 var(--s4) var(--s6);
  margin: var(--s6) auto var(--s6);
  max-width: 100%;
}
@media (min-width:640px){ .container{ max-width: 760px; } }
@media (min-width:960px){ .container{ max-width: 1080px; } }
@media (min-width:1280px){ .container{ max-width: 1280px; } }

/* ---------------------------------
   3) Topbar & navigation
   --------------------------------- */
header{ width:100%; }
.topbar{
  position: sticky; top: 0; z-index: 100;
  display:flex; align-items:center; gap: var(--s4);
  padding: calc(var(--s2) + .2rem) var(--s4);
  background: linear-gradient(180deg, rgba(255,255,255,.78), rgba(255,255,255,.62));
  border-bottom: 1px solid rgba(226,233,239,.9);
  box-shadow: var(--shadow-1);
  backdrop-filter: saturate(1.05) blur(6px);
}
.brand{ display:flex; align-items:center; gap:.65rem; }
.brand a{ font-weight:800; font-size:1.12rem; color:var(--text); letter-spacing:.2px; }
.brand .logo{
  width:34px; height:34px; border-radius:10px; display:block;
  background: linear-gradient(135deg, rgba(37,99,235,.10), rgba(6,182,212,.06));
  border:1px solid rgba(37,99,235,.10);
  box-shadow: 0 6px 14px rgba(37,99,235,.10);
}

/* Horizontal nav */
.topbar nav{ margin-left:auto; }
.topbar nav ul{
  margin:0; padding:0;
  list-style:none;
  display:flex; align-items:center; gap:.5rem;
  flex-wrap: wrap;
}
.topbar nav li{ display:inline-flex; }
.topbar nav a{
  display:inline-flex; align-items:center;
  padding:.5rem .75rem; border-radius:10px;
  color: var(--muted);
  transition: background var(--t-fast), color var(--t-fast), transform .08s;
}
.topbar nav a:hover{
  background: rgba(37,99,235,.08);
  color: var(--primary-700);
  transform: translateY(-1px);
}

/* User area */
.nav-user{ display:flex; align-items:center; gap:.5rem; margin-left: var(--s4); }
.nav-user .btn{ padding:.4rem .6rem; }

/* ---------------------------------
   4) Cards
   --------------------------------- */
.card{
  background: var(--card);
  border:1px solid var(--border);
  border-radius: var(--radius);
  padding: var(--s5);
  margin-bottom: var(--s5);
  box-shadow: var(--shadow-2);
  transition: transform var(--t-base), box-shadow var(--t-base), border-color var(--t-base);
}
.card:hover{ transform: translateY(-3px); box-shadow: var(--shadow-3); border-color:#e6ecf3; }
.card.sub{ padding: var(--s4); }
.card-compact{ padding: 14px 16px; }
.card-header{ display:grid; gap:var(--s3); margin-bottom: var(--s4); }
.card-header .title{ font-weight:800; font-size:1.05rem; }
.card-header .meta{ color:var(--muted); }
.card-header .actions{ display:flex; gap:.45rem; align-items:center; }
.card-footer{ margin-top: var(--s4); display:flex; justify-content:flex-end; gap:.5rem; }

/* ---------------------------------
   5) Grid helpers
   --------------------------------- */
.grid{ display:grid; gap: var(--s4); }
.grid.two{ grid-template-columns: 1fr; }
.grid.three{ grid-template-columns: 1fr; }
.grid.four{ grid-template-columns: 1fr; }
@media (min-width:640px){
  .grid.two{ grid-template-columns: repeat(2, minmax(0,1fr)); }
}
@media (min-width:900px){
  .grid.three{ grid-template-columns: repeat(3, minmax(0,1fr)); }
  .grid.four{ grid-template-columns: repeat(4, minmax(0,1fr)); }
}

/* ---------------------------------
   6) Forms
   --------------------------------- */
form label{ display:block; margin-bottom:.35rem; font-weight:700; color:var(--muted); font-size:.96rem; }
input, select, textarea{
  width:100%;
  border:1px solid var(--border);
  border-radius:12px;
  padding:.7rem .9rem;
  background:#fff;
  font: inherit;
  transition: box-shadow var(--t-fast), border-color var(--t-fast), transform .08s;
}
input:focus, select:focus, textarea:focus{
  border-color: var(--primary-600);
  box-shadow: 0 8px 22px rgba(37,99,235,.10);
  transform: translateY(-1px);
}
textarea{ min-height: 140px; resize: vertical; }
.form-actions{ display:flex; align-items:center; gap:.5rem; }

/* Inline tiny forms (admin panels) */
.form-inline{
  display:flex; flex-wrap:wrap; gap:.5rem .75rem; align-items:end; margin:.5rem 0;
}
.form-inline label{ margin:0; }
.form-inline input, .form-inline select{ height:38px; padding:.5rem .65rem; }

/* Compact form system */
.form-compact .grid-compact{
  display:grid;
  grid-template-columns: repeat(3, minmax(0,1fr));
  gap:10px 12px;
}
@media (max-width:1024px){ .form-compact .grid-compact{ grid-template-columns: repeat(2, minmax(0,1fr)); } }
.field .lbl{
  display:block; font-size:11px; font-weight:600; text-transform:uppercase; letter-spacing:.02em; color:#6b7280; margin-bottom:4px;
}
.form-compact input[type="text"],
.form-compact input[type="date"],
.form-compact select,
.form-compact textarea{
  width:100%; font-size:13px; line-height:1.25;
  border:1px solid #e6e9ef; border-radius:8px; background:#fff;
  padding:6px 8px; height:32px;
}
.form-compact textarea{ height:auto; min-height:72px; padding:8px; }
.field-span-2{ grid-column: span 2; } .field-span-3{ grid-column: span 3; }
@media (max-width:1024px){ .field-span-2, .field-span-3{ grid-column: span 2; } }
.form-actions-compact{ display:flex; align-items:center; gap:10px; margin-top:10px; }
.btn-compact{ padding:6px 12px; font-size:13px; line-height:1.2; border-radius:8px; }
.file-compact{ height:32px; font-size:12px; }

/* ---------------------------------
   7) Buttons
   --------------------------------- */
.btn{
  --btn-bg:#fff; --btn-fg:var(--text); --btn-bd:var(--border);
  display:inline-flex; align-items:center; justify-content:center; gap:.5rem;
  padding:.55rem .95rem; line-height:1; font-weight:800; font-size:.95rem;
  border:1px solid var(--btn-bd); color:var(--btn-fg); background:var(--btn-bg);
  border-radius:12px; cursor:pointer;
  transition: transform .06s var(--t-fast), box-shadow var(--t-fast), background var(--t-fast), border-color var(--t-fast);
  box-shadow: 0 2px 6px rgba(11,20,44,.04);
}
.btn:hover{ transform: translateY(-2px); box-shadow: var(--shadow-2); }
.btn:active{ transform: translateY(0); }
.btn.small{ padding:.35rem .6rem; font-size:.88rem; border-radius:10px; }

.btn.primary{
  --btn-bg: linear-gradient(180deg, var(--primary), var(--primary-600));
  --btn-fg:#fff; --btn-bd: rgba(24,120,255,.95);
  background:var(--btn-bg); color:var(--btn-fg); border:1px solid var(--btn-bd);
  box-shadow: 0 10px 26px rgba(37,99,235,.18);
}
.btn.primary:hover{ filter:brightness(.98); }

.btn.secondary{ --btn-bg:#f3f6fb; --btn-fg:#334155; }
.btn.danger{ --btn-bg:var(--danger); --btn-fg:#fff; --btn-bd:var(--danger); background:var(--danger); color:#fff; border:1px solid var(--danger); }
.btn.ghost{ background:transparent; border:1px dashed #d5dbe6; color:#475569; }

/* ---------------------------------
   8) Flash messages
   --------------------------------- */
.flash{ padding:.85rem 1rem; border-radius:12px; margin-bottom:1rem; font-weight:700; box-shadow:var(--shadow-1); border:1px solid var(--border); }
.flash-success{ background:#ecfdf5; color:#065f46; border-color:#c6f7de; }
.flash-error{ background:#fff1f2; color:#7a1220; border-color:#f9c7c9; }
.flash-warning{ background:#fff9eb; color:#7a4d00; border-color:#fde9a8; }

/* ---------------------------------
   9) Badges / status
   --------------------------------- */
.badge{ display:inline-block; padding:.28rem .6rem; border-radius:999px; font-size:.75rem; font-weight:800; text-transform:uppercase; letter-spacing:.3px; box-shadow:0 2px 6px rgba(11,20,44,.03); }
.priority-none{ background:#f3f4f6; color:var(--muted); }
.priority-low{ background:#ecfdf5; color:#065f46; }
.priority-mid{ background:#fffbeb; color:#92400e; }
.status{ display:inline-flex; align-items:center; gap:.35rem; padding:.25rem .6rem; border-radius:999px; font-weight:700; font-size:.78rem; border:1px solid var(--border); }
.status-success{ background:#eefcf6; color:#0a6f52; }
.status-error{ background:#fff1f2; color:#971a2b; }
.status-info{ background:#eef8ff; color:#0b4b8a; }

/* ---------------------------------
   10) Tables
   --------------------------------- */
.table{
  width:100%;
  border-collapse: collapse;
  background: var(--card);
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  border:1px solid var(--border);
  border-radius:12px;
  box-shadow: var(--shadow-1);
}
.table table{ width:100%; border-collapse: collapse; min-width: 720px; }
.table th, .table td{
  padding:.85rem 1rem; border-bottom:1px solid var(--border);
  text-align:left; vertical-align: middle;
}
.table th{
  background: linear-gradient(180deg, #fbfdff, #f7f9fc);
  font-weight:800; color:#4b5563; white-space: nowrap; font-size:.9rem; position:relative;
}
.table tbody tr{ transition: background var(--t-fast); }
.table tbody tr:hover{ background: #fbfdff; }
.table thead th{ position:sticky; top:0; z-index:1; backdrop-filter: blur(6px); }

/* Excel variant */
.table-excel{ width:100%; border-collapse: separate; border-spacing:0; background:#fff; border:1px solid #e6e9ef; border-radius:10px; overflow:hidden; }
.table-excel thead th{
  position:sticky; top:0; z-index:1; background:#f6f8fb; font-weight:600; font-size:12px;
  text-transform:uppercase; letter-spacing:.02em; color:#445064; border-bottom:1px solid #e6e9ef; padding:6px 10px;
}
.table-excel tbody td{ padding:6px 10px; border-bottom:1px solid #eef1f6; border-right:1px solid #f1f4f9; vertical-align:middle; white-space:nowrap; }
.table-excel tbody tr:nth-child(even) td{ background:#fbfdff; }
.table-excel tbody tr:hover td{ background:#f2f7ff; }
.table-excel thead th:last-child, .table-excel tbody td:last-child{ border-right:0; }
.table-excel .col-check{ width:34px; text-align:center; }
.table-excel .col-id{ width:72px; }
.table-excel .col-actions{ width:110px; text-align:right; }
.table-excel .col-photos{ width:140px; }
.table-excel .col-priority, .table-excel .col-status{ width:140px; }
.table-excel .btn.small{ padding:3px 8px; font-size:11px; border-radius:6px; }
.table-excel .badge{ padding:2px 8px; font-size:11px; }

/* thumbnails inside tables */
.thumbs{ display:flex; gap:.45rem; align-items:center; }
.thumbs img{
  width:48px; height:48px; object-fit:cover;
  border-radius:10px; border:1px solid var(--border); box-shadow: 0 6px 16px rgba(11,20,44,.04);
}

/* ---------------------------------
   11) Filters row
   --------------------------------- */
.filters{ display:grid; grid-template-columns:1fr; gap:.75rem; margin-bottom:1rem; }
.filter-actions{ display:flex; gap:.5rem; align-items:stretch; }

@media (min-width:900px){
  .filters{
    display:flex; flex-wrap: wrap; align-items: end; column-gap: 12px; row-gap: 10px; margin-bottom:.75rem;
  }
  .filters > *{ flex:1 1 240px; min-width:220px; max-width: 420px; }
  .filters label{
    display:grid; grid-template-columns: max-content 1fr; align-items:center; gap:.5rem; margin:0; white-space: nowrap;
  }
  .filters input, .filters select{ width:100%; min-width:0; max-width:none; padding:.5rem .6rem; border-radius:10px; }
  .filters .filter-actions{ flex:0 0 auto; margin-left:auto; display:flex; align-items:center; gap:.5rem; }
}

/* ---------------------------------
   12) Photos & modal
   --------------------------------- */
.photo-grid{ display:grid; grid-template-columns:1fr; gap: var(--s4); }
.photo-grid img{ width:100%; border-radius: var(--radius); border:1px solid var(--border); object-fit:cover; box-shadow: var(--shadow-1); }
.photo-actions{ margin-top:.5rem; display:flex; gap:.5rem; flex-wrap: wrap; }
.photo-slot{ display:flex; flex-direction: column; gap:.5rem; }

/* Compact editor */
.photo-grid-compact{ display:grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap:10px; }
@media (max-width:900px){ .photo-grid-compact{ grid-template-columns: repeat(2, 1fr); } }
.photo-slot-compact{ border:1px solid #e6e9ef; border-radius:8px; padding:8px; background:#fff; display:grid; gap:6px; }
.photo-slot-compact img{ width:100%; height:140px; object-fit:cover; border-radius:6px; border:1px solid #e6e9ef; background:#f6f8fb; }
.photo-upload-inline{ display:grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap:12px; align-items:start; }

/* Modal */
.photo-modal.hidden{ display:none; }
.photo-modal{
  position: fixed; inset:0; z-index: 1000;
  display:flex; justify-content:center; align-items:center;
  background: rgba(0,0,0,.92); padding:2%;
}
.photo-modal-box{ position:relative; width: min(1100px, 95vw); max-height: 92vh; display:flex; flex-direction: column; gap:10px; }
.photo-modal-header{ display:flex; align-items:center; justify-content:space-between; gap:8px; color:#fff; font-weight:700; font-size:1rem; }
.photo-modal-body{ display:grid; gap:12px; grid-template-columns:1fr; overflow:auto; }
@media (min-width:860px){ .photo-modal-body{ grid-template-columns: repeat(2, minmax(0,1fr)); } }
.photo-modal-body img{
  display:block; width:100%; height:auto; max-height:78vh; object-fit:contain;
  border-radius:10px; border:1px solid rgba(230,233,239,.7); background:#111; box-shadow: 0 12px 28px rgba(0,0,0,.35);
}
.close-btn{ background:transparent; border:0; font-size:24px; cursor:pointer; color:#e5e7eb; }

/* ---------------------------------
   13) Buildings collapsible
   --------------------------------- */
.building-summary{ display:flex; align-items:center; justify-content:space-between; cursor:pointer; list-style:none; }
.building-summary::-webkit-details-marker{ display:none; }
.building-summary h3{ position:relative; padding-left:1.2rem; margin:0; }
.building-summary h3::before{
  content:""; position:absolute; left:0; top:50%; width:.55rem; height:.55rem;
  border-right:2px solid currentColor; border-bottom:2px solid currentColor;
  transform: translateY(-50%) rotate(-45deg); transition: transform .2s ease;
}
.building-collapsible[open] .building-summary h3::before{ transform: translateY(-50%) rotate(45deg); }
.building-content{ overflow:hidden; transition: grid-template-rows .25s ease, opacity .25s ease; display:grid; grid-template-rows:1fr; opacity:1; }
.building-collapsible:not([open]) .building-content{ grid-template-rows:0fr; opacity:.96; }
.building-content > *{ min-height:0; }

/* ---------------------------------
   14) Pagination & bulk actions
   --------------------------------- */
.pagination{ display:flex; flex-wrap:wrap; gap:.4rem; justify-content:center; margin-top:1rem; }
.page-link{
  display:inline-flex; align-items:center; justify-content:center; min-width:38px; height:38px;
  padding:0 .65rem; border-radius:10px; border:1px solid var(--border); background:#fff;
  color:#334155; text-decoration:none; font-weight:700;
  transition: transform .08s var(--t-fast), box-shadow var(--t-fast), background var(--t-fast);
}
.page-link:hover{ transform: translateY(-1px); box-shadow: var(--shadow-1); }
.page-link.active{ background: var(--primary); color:#fff; border-color: transparent; }

.bulk-actions{ margin-top:1rem; display:flex; flex-wrap:wrap; gap:.5rem; }

/* ---------------------------------
   15) Footer
   --------------------------------- */
.footer{ text-align:center; padding:2.0rem 1rem; color:var(--muted); font-size:.95rem; }

/* ---------------------------------
   16) Auth wrapper (login)
   --------------------------------- */
.auth-wrapper{
  min-height: calc(100vh - 120px);
  display:grid; place-items:center; padding: var(--s6);
}
.auth-wrapper .card{ max-width: 420px; width: 100%; }
.auth-wrapper h1{ margin:0 0 .5rem; }

/* ---------------------------------
   17) Phone tweaks (<=640px)
   --------------------------------- */
@media (max-width:640px){
  :root{ --radius:12px; }

  html, body{ overflow-x:hidden; overscroll-behavior-x:none; }
  .container, .topbar, .card, .table, .table-excel, .filters{ max-width:100%; overflow-x:hidden; }
  img, video{ max-width:100%; height:auto; }

  .container{ padding:0 var(--s3) var(--s6); margin: var(--s5) auto var(--s6); }
  h1{ font-size:1.25rem; } h2{ font-size:1.05rem; }

  /* Topbar nav wraps nicely */
  .topbar{ padding: var(--s2) var(--s3); gap: var(--s2); }
  .topbar .brand a{ font-size:1rem; }
  .topbar .brand .logo{ width:28px; height:28px; border-radius:8px; }
  .topbar nav ul{ gap:.35rem; }
  .topbar nav a{ padding:.4rem .55rem; font-size:.92rem; border-radius:8px; }

  /* Touch-friendly inputs (prevents iOS zoom) */
  input, select, textarea,
  .form-compact input[type="text"],
  .form-compact input[type="date"],
  .form-compact select,
  .form-compact textarea{ font-size:16px !important; line-height:1.35; }
  input, select{ min-height:44px; }
  .form-compact input[type="text"], .form-compact input[type="date"], .form-compact select{ height:40px; padding:10px 12px; }
  .file-compact{ height:40px; font-size:14px; }

  /* Filters stack */
  .filters{ display:grid; grid-template-columns:1fr !important; gap:.6rem; margin-bottom:.8rem; }
  .filter-actions{ display:grid; grid-template-columns:1fr 1fr; gap:.5rem; }
  .filter-actions .btn{ width:100%; }

  /* Grid stacks */
  .grid.two, .grid.three, .grid.four{ grid-template-columns: 1fr; }
  .field-span-2, .field-span-3{ grid-column: span 1; }

  /* Convert tables to "cards" */
  .table{ border:0; border-radius:0; box-shadow:none; overflow:visible; }
  .table thead{ display:none !important; }
  .table table{ min-width:0 !important; }
  .table tbody{ display:grid; gap:.6rem; }
  .table tr{
    display:grid; gap:.5rem; padding:.85rem;
    border:1px solid var(--border); border-radius:12px; background: var(--card);
  }
  .table td{
    display:grid; grid-template-columns: 42% 1fr; align-items:center; gap:.65rem;
    padding:.2rem 0; border:0; white-space:normal; word-break: break-word;
  }
  .table td::before{ content: attr(data-label); color: var(--muted); font-weight:700; font-size:.95rem; }
  .table td[aria-label]::before{ content: attr(aria-label); } /* fallback */
  .thumbs img{ width:44px; height:44px; border-radius:8px; }
  .badge{ font-size:.7rem; padding:.2rem .5rem; }
  .row-actions{ display:flex; gap:.4rem; flex-wrap: wrap; }
  .row-actions .btn{ flex:1 1 auto; min-width:44%; padding:.45rem .6rem; }

  /* Excel table -> cards */
  .table-excel{ border:0; border-radius:0; box-shadow:none; overflow:visible; }
  .table-excel thead{ display:none !important; }
  .table-excel tbody{ display:grid; gap:.6rem; }
  .table-excel tr{ display:grid; gap:.5rem; padding:.85rem; border:1px solid var(--border); border-radius:12px; background: var(--card); }
  .table-excel td{
    display:grid; grid-template-columns: 42% 1fr; align-items:center; gap:.65rem;
    padding:.2rem 0; border:0; white-space: normal; word-break: break-word;
  }
  .table-excel td::before{ content: attr(data-label); color: var(--muted); font-weight:700; font-size:.95rem; }
  .table-excel td[aria-label]::before{ content: attr(aria-label); }
  .table-excel .thumbs img{ width:44px; height:44px; border-radius:8px; }
  .table-excel .badge{ font-size:.7rem; padding:.2rem .5rem; }
  .table-excel .row-actions{ display:flex; gap:.4rem; flex-wrap: wrap; }
  .table-excel .row-actions .btn{ flex:1 1 auto; min-width:44%; padding:.45rem .6rem; }
  .table-excel .col-actions .btn{ width:100%; }

  /* Photos layout on small screens */
  .photo-grid-compact{ grid-template-columns:1fr; }
  .photo-upload-inline{ grid-template-columns:1fr; }
}

/* ---------------------------------
   18) Extra: small polish
   --------------------------------- */
.table td, .card{ word-break: break-word; }
a, td, th{ overflow-wrap: anywhere; }

/* Ensure no stray lists look broken inside navs */
.nav, .nav ul{ list-style: none; margin:0; padding:0; }
.brand { display:flex; align-items:center; gap:.6rem; }
.brand-logo .logo { width:36px; height:36px; display:block; object-fit:contain; border-radius:8px; }
.brand-title { font-weight:800; font-size:1.12rem; }
